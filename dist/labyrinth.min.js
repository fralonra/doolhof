!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";const t=0,n=1,e=require("chalk");function o(t,n,e){const{x:o,y:r}=n,i=[];return t[o]&&t[o][r-e]&&i.push(t[o][r-e]),t[o-e]&&t[o-e][r]&&i.push(t[o-e][r]),t[o]&&t[o][r+e]&&i.push(t[o][r+e]),t[o+e]&&t[o+e][r]&&i.push(t[o+e][r]),i}function r(t){return Math.floor(Math.random()*t)}new class{constructor(t){this.options={...{generate:!0,row:10,col:10},...t},this.fmtMaze=null,this.options.generate&&this.generate()}generate(){console.time("gen-maze");const i=function(e){const{row:r,col:i}=e,s=[];for(let e=0;e<2*i+1;++e){const o=[];for(let i=0;i<2*r+1;++i){const r={x:e,y:i};e%2==1&&i%2==1?(r.type=n,r.visited=!1):r.type=t,o.push(r)}s.push(o)}return s.forEach(t=>t.forEach(t=>{t.path=function(t,n){return o(t,n,2)}(s,t),t.wall=function(t,n){return o(t,n,1)}(s,t)})),s}(this.options);!function(t,e){const{row:o,col:i}=e;let s;const c=[],l=[];function h(e,o){return e.visited||(e.visited=!0,c.push(e)),o?(s=t[(e.x+o.x)/2][(e.y+o.y)/2]).type=n:s=null,o}(function t(n,e=1){return n.reduce((n,o)=>n.concat(e>1&&Array.isArray(o)?t(o,e-1):o),[])})(t).filter(t=>t.type===n).forEach((t,n)=>{l[n]=t});const u=o*i;let a=t[1][1];for(;c.length<u;){const t=a.path;let e;const o=t.filter(t=>!t.visited);if(o.length)e=o[r(o.length)];else{const o=a.wall.filter(t=>t.type===n);o.length?(1!==o.length||s&&1===o.lengh&&s.x!==o[0].x&&s.y!==o[0].y)&&l.splice(l.findIndex(t=>t.x===a.x&&t.y===a.y),1):e=t[r(t.length)]}a=h(a,e)||c[r(c.length)]}}(i,this.options),this.fmtMaze=function(t,e){const{row:o,col:r}=e;return{meta:{row:o,col:r},raw:t.map(t=>t.map(t=>t.type===n))}}(i,this.options),this.fmtMaze.raw.forEach(t=>{console.log(t.map(t=>t?e.green("o"):"Â·").join(" "))}),console.timeEnd("gen-maze")}get(){return this.fmtMaze}}});
